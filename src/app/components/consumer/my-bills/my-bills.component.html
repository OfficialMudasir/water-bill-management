<div class="container-fluid">
    <div class="mt-0 mb-4">
        <!-- Settings Categories -->
        <!-- Header with New Consumer Button -->
        <div class="">
            <button type="button" class="btn btn-dark p-2 fw-bold" (click)="resetForm()" data-bs-toggle="modal"
                data-bs-target="#newConnectionModal">
                <i class="bi bi-plus-lg me-2"></i>Apply New Connection
            </button>

        </div>
        <div class="row g-4 mt-4">
            <div class="col-md-3" *ngFor="let category of settingsCategories">
                <div class="card h-100">
                    <div class="card-body">

                        <div class="d-flex align-items-center mb-3">
                            <i [class]="'fas ' + category.icon + ' me-2 w-6 text-primary-600'"></i>
                            <h5 class="card-title mb-0">{{category.title}}</h5>
                        </div>
                        <div class="list-group list-group-flush">
                            <a *ngFor="let item of category.items" [href]="item.link"
                                class="list-group-item list-group-item-action"
                                [class.active]="selectedItem === item.name.toLowerCase().replaceAll(' ', '-')"
                                (click)="$event.preventDefault(); changeView(item.name.toLowerCase().replaceAll(' ', '-'))">
                                {{item.name}}
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>



        <div class="card mt-4 " *ngIf="currentView === 'view-current-bill'">
            <div class="card-header p-3 text-center">
                <h3>Consumer Current Water Bill</h3>
                <h6>Water price / sewer sheet / sewer combination fee / water column fee</h6>
            </div>
            <div class="card-body p-5">
                <div class="row">
                    <div class="col-md-6">
                        <div class="card" style="height: 290px;">
                            <div class="card-body p-5">
                                <div class="row">
                                    <div class="col-md-6">
                                        <p><strong>Consumer Number:</strong></p>
                                        <p><strong>Demand Number / Coincidence Number:</strong>
                                        </p>
                                        <p><strong>Mr / Mrs:</strong></p>
                                        <p><strong>Address:</strong></p>
                                        <p><strong>Billing Type:</strong> </p>
                                        <p><strong>Monthly Average:</strong></p>
                                        <p><strong>Sewerage:</strong></p>
                                    </div>
                                    <div class="col-md-6">
                                        <p> {{ currentBill.consumerNumber }}</p>
                                        <p>{{
                                            currentBill.demandNumber }}
                                        </p>
                                        <p>{{ currentBill.name }}</p>
                                        <p>{{ currentBill.address }}</p>
                                        <p> {{ currentBill.billingType }}</p>
                                        <p>{{ currentBill.monthlyAverage }}</p>
                                        <p> {{ currentBill.sewerage }}</p>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 ">
                        <div class="card" style="height: 290px;">
                            <div class="card-body p-5">
                                <div class="row">
                                    <div class="col-md-6">
                                        <p><strong>Bill No:</strong> </p>
                                        <p><strong>Bill Date:</strong></p>
                                        <p><strong>Billing Period:</strong> </p>
                                        <p><strong>Due Date:</strong> </p>
                                        <p><strong>Detachment Date:</strong> </p>
                                        <p><strong>Combination Category:</strong> </p>

                                    </div>
                                    <div class="col-md-6">
                                        <p>{{ currentBill.billNumber }}</p>
                                        <p>{{ currentBill.billDate }}</p>
                                        <p>{{ currentBill.billingPeriod }}</p>
                                        <p>{{ currentBill.dueDate }}</p>
                                        <p> {{ currentBill.detachmentDate }}</p>
                                        <p> {{ currentBill.combinationCategory }}</p>

                                    </div>

                                </div>

                            </div>
                        </div>
                    </div>
                </div>

                <hr>
                <h3 class="mt-4">Detailed description of bill payable</h3>
                <hr>

                <div class="card">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <strong class="text-center">Detailed description of bill payable</strong>
                                <div class="row">
                                    <div class="col-md-6">
                                        <p><strong>Item Name</strong></p>
                                        <p>Water value </p>
                                        <p>Sewer connection / sheet fee</p>
                                        <p>Meter far </p>
                                        <p>Other demands</p>
                                        <p>Distributed check amount </p>
                                        <p>Late fees </p>
                                        <p><strong>Current Demand</strong></p>
                                    </div>

                                    <div class="col-md-6">
                                        <p><strong>In Rupees</strong></p>
                                        <p>1444.00</p>
                                        <p>0.00</p>
                                        <p>0.00</p>
                                        <p>0.00</p>
                                        <p>0.00</p>
                                        <p>0.00</p>
                                        <p><strong>1444</strong></p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-6">
                                        <p><strong>Item Name</strong></p>
                                        <p>Residual Water value </p>
                                        <p>Residue Sewer connection / sheet fee</p>
                                        <p>Remnant Meter far </p>
                                        <p>Remnant Other demands</p>
                                        <p><br /></p>
                                        <p><br /></p>
                                        <p><Strong>Remnant demand</Strong></p>
                                        <p><strong>Temporary Deposit (-)</strong></p>
                                    </div>

                                    <div class="col-md-6">
                                        <p><strong>In Rupees</strong></p>
                                        <p>0.00</p>
                                        <p>0.00</p>
                                        <p>0.00</p>
                                        <p>0.00</p>
                                        <p><br /></p>
                                        <p><br /></p>
                                        <p><strong>0</strong></p>
                                        <p><strong>0.00</strong></p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <hr>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-6">
                                        <p>Until the discount due date (-)</p>
                                    </div>
                                    <div class="col-md-6">
                                        <p>84.00</p>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-6">
                                        <p><strong>To the totdal due date</strong></p>
                                    </div>
                                    <div class="col-md-6">
                                        <p>1360</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr>


                        <div class="row">
                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-6">
                                        <p>Payment Status</p>
                                    </div>
                                    <div class="col-md-6">
                                        <p><strong class="text-danger">This bill has not been paid</strong></p>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-6">
                                        <p>Payment Amount</p>
                                    </div>
                                    <div class="col-md-6">
                                        <p>-</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-6">
                                        <p>Branch Name</p>
                                    </div>
                                    <div class="col-md-6">
                                        <p>EE North</p>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-6">
                                        <p>Collection Center Name</p>
                                    </div>
                                    <div class="col-md-6">
                                        <p>Chandigarh</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row mt-5">
                            <div class="col-md-6">
                                <div class="row">
                                    <p>Revenue Superintendent / Bill Clerk</p>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="row">
                                    <p>Executive Engineer / Water Engineer / Assistant Engineer Uttarakhand Water
                                        Institute</p>
                                </div>
                            </div>
                        </div>

                        <div class="mt-5">
                            <p><strong>Note:</strong></p>
                            <div class="row">
                                <p><strong>1. Make sure the payment of each invoice by the due date, otherwise the
                                        amputation date shown in the bill under Section-72 (a) (b) of the Uttaranchal
                                        (Uttar Pradesh Water Supply and Sewer Arrangement Act, 1975) Uncover and
                                        Distribution Order, 2002 Or after that the water combination can be dissected
                                        without any additional information.</strong></p>
                                <p><strong>2. The rebate on the minimum charge will not be admissible ie 10% liter per
                                        month on drinking water consumption, only a maximum of 10 percent rebate will be
                                        admissible on the amount of water for payment within 30 days. In case of
                                        non-payment of dues, "late fee' will be charged at the rate of 1.50 percent
                                        monthly for the delayed period.</strong></p>
                                <p><strong></strong></p>


                            </div>
                        </div>

                    </div>
                </div>



                <div class="text-center mt-4">
                    <button class="btn btn-dark" data-bs-toggle="modal" data-bs-target="#imageModal">Export
                        Bill</button>
                </div>
            </div>
        </div>


        <div class="card mt-4 " *ngIf="currentView === 'view-previous-bill'">
            <div class="card-header p-3 text-center">
                <h3>Consumer Previous Water Bill</h3>
                <h6>Water price / sewer sheet / sewer combination fee / water column fee</h6>
            </div>


            <p class="mt-5 mb-0 text-center"><strong>Status: </strong> <strong class="text-success">Your bill is
                    paid!</strong></p>

            <div class="card-body p-5">
                <div class="row">
                    <div class="col-md-6">
                        <div class="card" style="height: 290px;">
                            <div class="card-body p-5">
                                <div class="row">
                                    <div class="col-md-6">
                                        <p><strong>Consumer Number:</strong></p>
                                        <p><strong>Demand Number / Coincidence Number:</strong>
                                        </p>
                                        <p><strong>Mr / Mrs:</strong></p>
                                        <p><strong>Address:</strong></p>
                                        <p><strong>Billing Type:</strong> </p>
                                        <p><strong>Monthly Average:</strong></p>
                                        <p><strong>Sewerage:</strong></p>
                                    </div>
                                    <div class="col-md-6">
                                        <p> {{ currentBill.consumerNumber }}</p>
                                        <p>{{
                                            currentBill.demandNumber }}
                                        </p>
                                        <p>{{ currentBill.name }}</p>
                                        <p>{{ currentBill.address }}</p>
                                        <p> {{ currentBill.billingType }}</p>
                                        <p>{{ currentBill.monthlyAverage }}</p>
                                        <p> {{ currentBill.sewerage }}</p>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 ">
                        <div class="card" style="height: 290px;">
                            <div class="card-body p-5">
                                <div class="row">
                                    <div class="col-md-6">
                                        <p><strong>Bill No:</strong> </p>
                                        <p><strong>Bill Date:</strong></p>
                                        <p><strong>Billing Period:</strong> </p>
                                        <p><strong>Due Date:</strong> </p>
                                        <p><strong>Detachment Date:</strong> </p>
                                        <p><strong>Combination Category:</strong> </p>

                                    </div>
                                    <div class="col-md-6">
                                        <p>{{ currentBill.billNumber }}</p>
                                        <p>{{ currentBill.billDate }}</p>
                                        <p>{{ currentBill.billingPeriod }}</p>
                                        <p>{{ currentBill.dueDate }}</p>
                                        <p> {{ currentBill.detachmentDate }}</p>
                                        <p> {{ currentBill.combinationCategory }}</p>

                                    </div>

                                </div>

                            </div>
                        </div>
                    </div>
                </div>

                <hr>
                <h3 class="mt-4">Detailed description of bill payable</h3>
                <hr>

                <div class="card">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <strong class="text-center">Detailed description of bill payable</strong>
                                <div class="row">
                                    <div class="col-md-6">
                                        <p><strong>Item Name</strong></p>
                                        <p>Water value </p>
                                        <p>Sewer connection / sheet fee</p>
                                        <p>Meter far </p>
                                        <p>Other demands</p>
                                        <p>Distributed check amount </p>
                                        <p>Late fees </p>
                                        <p><strong>Current Demand</strong></p>
                                    </div>

                                    <div class="col-md-6">
                                        <p><strong>In Rupees</strong></p>
                                        <p>1444.00</p>
                                        <p>0.00</p>
                                        <p>0.00</p>
                                        <p>0.00</p>
                                        <p>0.00</p>
                                        <p>0.00</p>
                                        <p><strong>1444</strong></p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-6">
                                        <p><strong>Item Name</strong></p>
                                        <p>Residual Water value </p>
                                        <p>Residue Sewer connection / sheet fee</p>
                                        <p>Remnant Meter far </p>
                                        <p>Remnant Other demands</p>
                                        <p><br /></p>
                                        <p><br /></p>
                                        <p><Strong>Remnant demand</Strong></p>
                                        <p><strong>Temporary Deposit (-)</strong></p>
                                    </div>

                                    <div class="col-md-6">
                                        <p><strong>In Rupees</strong></p>
                                        <p>0.00</p>
                                        <p>0.00</p>
                                        <p>0.00</p>
                                        <p>0.00</p>
                                        <p><br /></p>
                                        <p><br /></p>
                                        <p><strong>0</strong></p>
                                        <p><strong>0.00</strong></p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <hr>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-6">
                                        <p>Until the discount due date (-)</p>
                                    </div>
                                    <div class="col-md-6">
                                        <p>84.00</p>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-6">
                                        <p><strong>To the totdal due date</strong></p>
                                    </div>
                                    <div class="col-md-6">
                                        <p>1360</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr>


                        <div class="row">
                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-6">
                                        <p>Payment Status</p>
                                    </div>
                                    <div class="col-md-6">
                                        <p><strong class="text-success">This bill is paid</strong></p>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-6">
                                        <p>Payment Amount</p>
                                    </div>
                                    <div class="col-md-6">
                                        <p>-</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-6">
                                        <p>Branch Name</p>
                                    </div>
                                    <div class="col-md-6">
                                        <p>EE North</p>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="row">
                                    <div class="col-md-6">
                                        <p>Collection Center Name</p>
                                    </div>
                                    <div class="col-md-6">
                                        <p>Chandigarh</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row mt-5">
                            <div class="col-md-6">
                                <div class="row">
                                    <p>Revenue Superintendent / Bill Clerk</p>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="row">
                                    <p>Executive Engineer / Water Engineer / Assistant Engineer Uttarakhand Water
                                        Institute</p>
                                </div>
                            </div>
                        </div>

                        <div class="mt-5">
                            <p><strong>Note:</strong></p>
                            <div class="row">
                                <p><strong>1. Make sure the payment of each invoice by the due date, otherwise the
                                        amputation date shown in the bill under Section-72 (a) (b) of the Uttaranchal
                                        (Uttar Pradesh Water Supply and Sewer Arrangement Act, 1975) Uncover and
                                        Distribution Order, 2002 Or after that the water combination can be dissected
                                        without any additional information.</strong></p>
                                <p><strong>2. The rebate on the minimum charge will not be admissible ie 10% liter per
                                        month on drinking water consumption, only a maximum of 10 percent rebate will be
                                        admissible on the amount of water for payment within 30 days. In case of
                                        non-payment of dues, "late fee' will be charged at the rate of 1.50 percent
                                        monthly for the delayed period.</strong></p>
                                <p><strong></strong></p>


                            </div>
                        </div>

                    </div>
                </div>



                <div class="text-center mt-4">
                    <button class="btn btn-dark" data-bs-toggle="modal" data-bs-target="#imageModal">Export
                        Bill</button>
                </div>
            </div>
        </div>


        <div class="card mt-4" *ngIf="currentView === 'pay-bill'">
            <div class="card-header p-3" style="background-color: white;">
                <h5>Pay Bill</h5>
            </div>
            <div class="card-body p-5">

                <p><strong>Consumer Code: </strong>CON001</p>
                <p><strong>Current Reading: </strong>450 Units</p>
                <p><strong>Amount: </strong><i class="bi bi-currency-rupee"></i>1500</p>

                <div class="">
                    <button type="button" class="btn btn-dark mt-4 mb-4">Proceed to Pay</button>
                </div>

            </div>
        </div>

        <div class="card mt-4" style="width: 49%;" *ngIf="currentView === 'change-connection-request'">
            <div class="card">
                <div class="card-header p-3" style="background-color: white;">
                    <h4>Change Connection Request</h4>
                </div>
                <div class="card-body">

                    <form (ngSubmit)="onSubmit()" #complaintForm="ngForm">
                        <div class="row">
                            <div class="col-md-6 mb-4">
                                <div class="form-group ">
                                    <label for="userName">Connection ID</label>
                                    <input type="text" id="userName" [(ngModel)]="userName" name="userName" required
                                        class="form-control mt-1" />
                                </div>
                            </div>
                            <div class="col-md-6 mb-4">
                                <div class="form-group ">
                                    <label for="userName">Full Name</label>
                                    <input type="text" id="userName" [(ngModel)]="userName" name="userName" required
                                        class="form-control mt-1" />
                                </div>
                            </div>
                            <div class="col-md-6 mb-4">
                                <div class="form-group ">
                                    <label for="email">Email</label>
                                    <input type="email" id="email" [(ngModel)]="email" name="email" required
                                        class="form-control mt-1" />
                                </div>
                            </div>
                            <div class="col-md-6 mb-4">
                                <label>Type of Connection</label>
                                <select class="form-select border-focus mt-1" [(ngModel)]="newconnection.type"
                                    name="type" required>
                                    <option value="" disabled>Select a Connection Type</option>
                                    <option value="Residential">Residential</option>
                                    <option value="Commercial">Commercial</option>
                                </select>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-dark mb-4 mt-4" (click)="submitChangeRequest()">Submit Connection Request</button>
                    </form>

                </div>
            </div>
        </div>

        <div class="card mt-4" style="width: 49%;" *ngIf="currentView === 'pay-bill-before-due-date-to-avail-discount'">
            <div class="card-header p-3" style="background-color: white;">
                <h5>Pay Bill Before Due Date To Avail Discount</h5>
            </div>
            <div class="card-body p-5">

                <p><strong>Consumer Code: </strong>CON001</p>
                <p><strong>Current Reading: </strong>350 Units</p>
                <p><strong>Amount with Discount Rate: </strong><i class="bi bi-currency-rupee"></i>1000</p>

                <div class="">
                    <button type="button" class="btn btn-dark mt-4 mb-4">Proceed to Pay Advance</button>
                </div>

            </div>
        </div>


        <div class="card mt-4" *ngIf="currentView === 'bill-history'">
            <div class="container-fluid container-view-payments">
                <!-- Action Cards -->
                <div class="row g-4 mb-4 d-none">
                    <!-- Generate Bills Card -->
                    <!-- <div class="col-md-4">
                        <div class="card h-100">
                            <div class="card-body">
                                <h5 class="card-title mb-4">Generate Bills</h5>
                                <div class="text-center border border-dashed rounded p-4 mb-4">
                                    
                                    <i class="bi bi-cloud-upload fs-2 text-muted mb-2">
                                        <input type="file" class="hidden" hidden id="meterReadingsFile" accept=".xlsx,.xls">
                                    </i>
                                    <p class="text-muted mb-0">Upload meter readings Excel file</p>
                                </div>
                                <button class="btn btn-dark w-100">Generate Bills</button>
                            </div>
                        </div>
                    </div> -->

                    <!-- Manual Payment Entry Card -->
                    <!-- <div class="col-md-4">
                        <div class="card h-100">
                            <div class="card-body">
                                <h5 class="card-title mb-4">Manual Payment Entry</h5>
                                <div class="mb-3">
                                    <input type="text" class="form-control mb-3" placeholder="Connection ID">
                                    <input type="number" class="form-control" placeholder="Amount">
                                </div>
                                <button class="btn btn-dark w-100">Update Payment</button>
                            </div>
                        </div>
                    </div> -->

                    <!-- Billing Corrections Card -->
                    <!-- <div class="col-md-4">
                        <div class="card h-100">
                            <div class="card-body">
                                <h5 class="card-title mb-4">Billing Corrections</h5>
                                <div class="d-grid gap-2">
            
                                    <button type="button" class="btn btn-outline-dark" data-bs-toggle="modal" data-bs-target="#exampleModal">
                                        Bill Generation Correction
                                    </button>
                                    <button class="btn btn-outline-dark">Change Connection Status</button>
                                </div>
                            </div>
                        </div>
                    </div> -->
                </div>

                <!-- Recent Bills Section -->
                <div class="card">
                    <div class="card-body">
                        <!-- Header -->
                        <div class="d-flex justify-content-between align-items-center mb-4">
                            <h5 class="card-title mb-0">Recent Bills</h5>
                            <div class="d-flex gap-2">
                                <input type="text" class="form-control" placeholder="Search bills..."
                                    [(ngModel)]="searchTerm">
                                <select class="form-select" style="width: 200px;" [(ngModel)]="selectedPaymentStatus">
                                    <option value="">Payment Status</option>
                                    <option value="paid">Paid</option>
                                    <option value="pending">Pending</option>
                                    <option value="overdue">Overdue</option>
                                </select>
                            </div>
                        </div>

                        <!-- Bills Table -->
                        <div class="table-responsive">
                            <table class="table table-hover mb-0">
                                <thead class="table-light">
                                    <tr>
                                        <th>BILL ID</th>
                                        <th>CONNECTION ID</th>
                                        <th>AMOUNT</th>
                                        <th>DUE DATE</th>
                                        <th>STATUS</th>
                                        <th>ACTIONS</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let bill of bills">
                                        <td>{{bill.id}}</td>
                                        <td>{{bill.connectionId}}</td>
                                        <td>₹{{bill.amount}}</td>
                                        <td>{{bill.dueDate}}</td>
                                        <td>
                                            <span [class]="getStatusClass(bill.status)">
                                                {{bill.status}}
                                            </span>
                                        </td>
                                        <td>
                                            <button class="btn btn-link text-dark p-0 me-2" data-bs-toggle="modal"
                                                data-bs-target="#imageModal">
                                                <i class="bi bi-eye"></i>
                                            </button>
                                            <button class="btn btn-link text-dark p-0" data-bs-toggle="modal"
                                                data-bs-target="#paymentRecieptModal">
                                                <i class="bi bi-download"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- Pagination -->
                        <div class="d-flex justify-content-between align-items-center mt-4">
                            <div class="text-muted">
                                Showing 1 to 10 of 50 bills
                            </div>
                            <div class="btn-group">
                                <button class="btn btn-outline-secondary">Previous</button>
                                <button class="btn btn-outline-secondary">Next</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>



            <!-- Modal -->
            <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content modal-content-custom">
                        <div class="modal-header border-0">
                            <h4 class="modal-title fs-5" id="exampleModalLabel">
                                Bill Correction
                            </h4>
                            <!-- <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> -->
                        </div>
                        <div class="modal-body">

                            <form (ngSubmit)="onSubmit()">
                                <div class="row g-4">
                                    <div class="col-md-12">
                                        <div class="mb-3"><label class="mb-2">Connection ID</label>
                                            <input type="text" class="form-control border-focus" [(ngModel)]="fullName"
                                                name="fullName" required />
                                        </div>

                                        <div class="mb-3">
                                            <label class="mb-2">Connection Type</label>
                                            <select class="form-control border-focus" [(ngModel)]="connectionType"
                                                name="connectionType">
                                                <option value="" selected>Select a Connection</option>
                                                <option value="Residential">Meter Reading</option>
                                                <option value="Commercial">Rate Correction</option>
                                                <option value="Commercial">Billing Period</option>
                                            </select>
                                        </div>

                                        <div class="mb-0"><label class="mb-2">New Value</label>
                                            <input type="text" class="form-control border-focus"
                                                [(ngModel)]="phoneNumber" name="phoneNumber" required />
                                        </div>
                                    </div>
                                </div>

                            </form>
                        </div>
                        <div class="modal-footer border-0">
                            <button type="button" class="btn btn-light" data-bs-dismiss="modal">Cancel</button>
                            <button type="submit" class="btn btn-dark">Apply Correction</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card mt-4" *ngIf="currentView === 'online-bill-payment-status'">
            <!-- Recent Bills Section -->
            <div class="card">
                <div class="card-body">
                    <!-- Header -->
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h5 class="card-title mb-0">Bill Payment Status </h5>
                        <div class="d-flex gap-2">
                            <input type="text" class="form-control" placeholder="Search bills..."
                                [(ngModel)]="searchTerm">
                            <select class="form-select" style="width: 200px;" [(ngModel)]="selectedPaymentStatus">
                                <option value="">Payment Status</option>
                                <option value="paid">Paid</option>
                                <option value="pending">Pending</option>
                                <option value="overdue">Overdue</option>
                            </select>
                        </div>
                    </div>

                    <!-- Bills Table -->
                    <div class="table-responsive">
                        <table class="table table-hover mb-0">
                            <thead class="table-light">
                                <tr>
                                    <th>BILL ID</th>
                                    <th>CONNECTION ID</th>
                                    <th>AMOUNT</th>
                                    <th>DUE DATE</th>
                                    <th>STATUS</th>
                                    <th>ACTIONS</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let bill of bills">
                                    <td>{{bill.id}}</td>
                                    <td>{{bill.connectionId}}</td>
                                    <td>₹{{bill.amount}}</td>
                                    <td>{{bill.dueDate}}</td>
                                    <td>
                                        <span [class]="getStatusClass(bill.status)">
                                            {{bill.status}}
                                        </span>
                                    </td>
                                    <td>
                                        <button class="btn btn-link text-dark p-0 me-2" data-bs-toggle="modal"
                                            data-bs-target="#imageModal">
                                            <i class="bi bi-eye"></i>
                                        </button>
                                        <button class="btn btn-link text-dark p-0" data-bs-toggle="modal"
                                            data-bs-target="#paymentRecieptModal">
                                            <i class="bi bi-download"></i>
                                        </button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <!-- Pagination -->
                    <div class="d-flex justify-content-between align-items-center mt-4">
                        <div class="text-muted">
                            Showing 1 to 10 of 50 bills
                        </div>
                        <div class="btn-group">
                            <button class="btn btn-outline-secondary">Previous</button>
                            <button class="btn btn-outline-secondary">Next</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card mt-4" *ngIf="currentView === 'report-incorrect-bill'">
            <div class="card">
                <div class="card-header p-3">
                    <h4>Report Incorrect Bill</h4>
                </div>
                <div class="card-body">

                    <form (ngSubmit)="onSubmit()" #complaintForm="ngForm">
                        <div class="form-group mt-2">
                            <label for="userName">Name:</label>
                            <input type="text" id="userName" [(ngModel)]="userName" name="userName" required
                                class="form-control" />
                        </div>

                        <div class="form-group mt-3">
                            <label for="email">Email:</label>
                            <input type="email" id="email" [(ngModel)]="email" name="email" required
                                class="form-control" />
                        </div>

                        <div class="form-group mt-3">
                            <label for="complaint">Complaint:</label>
                            <textarea id="complaint" [(ngModel)]="complaint" name="complaint" required
                                class="form-control"></textarea>
                        </div>

                        <button type="submit" class="btn btn-dark mt-4">Submit Complaint</button>
                    </form>

                </div>
            </div>
        </div>

        <div class="card mt-4" *ngIf="currentView === 'online-payment-problem'">
            <div class="card">
                <div class="card-header p-3">
                    <h4>Report Online Payment Problem</h4>
                </div>
                <div class="card-body">

                    <form (ngSubmit)="onSubmit()" #complaintForm="ngForm">
                        <div class="form-group mt-2">
                            <label for="userName">Name:</label>
                            <input type="text" id="userName" [(ngModel)]="userName" name="userName" required
                                class="form-control" />
                        </div>

                        <div class="form-group mt-3">
                            <label for="email">Email:</label>
                            <input type="email" id="email" [(ngModel)]="email" name="email" required
                                class="form-control" />
                        </div>

                        <div class="form-group mt-3">
                            <label for="complaint">Complaint:</label>
                            <textarea id="complaint" [(ngModel)]="complaint" name="complaint" required
                                class="form-control"></textarea>
                        </div>

                        <button type="submit" class="btn btn-dark mt-4">Submit Complaint</button>
                    </form>

                </div>
            </div>
        </div>

        <div class="card mt-4" *ngIf="currentView === 'other-bill-complaint'">
            <div class="card">
                <div class="card-header p-3">
                    <h4>Other Bill Complaint</h4>
                </div>
                <div class="card-body">

                    <form (ngSubmit)="onSubmit()" #complaintForm="ngForm">
                        <div class="form-group mt-2">
                            <label for="userName">Name:</label>
                            <input type="text" id="userName" [(ngModel)]="userName" name="userName" required
                                class="form-control" />
                        </div>

                        <div class="form-group mt-3">
                            <label for="email">Email:</label>
                            <input type="email" id="email" [(ngModel)]="email" name="email" required
                                class="form-control" />
                        </div>

                        <div class="form-group mt-3">
                            <label for="complaint">Complaint:</label>
                            <textarea id="complaint" [(ngModel)]="complaint" name="complaint" required
                                class="form-control"></textarea>
                        </div>

                        <button type="submit" class="btn btn-dark mt-4">Submit Complaint</button>
                    </form>

                </div>
            </div>
        </div>

    </div>


    <!-- Modal for displaying image -->
    <div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="imageModalLabel">Print Current Bill</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body p-4">
                    <img src="assets/WaterBill.jpg" class="img-fluid" alt="Print Current Bill" />
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-dark" (click)="printBill()">Print Bill</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for displaying image -->
    <div class="modal fade" id="paymentRecieptModal" tabindex="-1" aria-labelledby="paymentRecieptModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header border-0">
                    <div class="w-100 text-center">
                        <h3>Water Authority</h3>
                        <h6>Online Payment Reciept</h6>
                    </div>
                </div>

                <div class="modal-body p-5">
                    <div class="receipt-header">
                        <div class="row">
                            <div class="col-md-6">
                                <p><strong>Date:</strong> {{ paymentReciept.todayDate | date: 'dd/MM/yyyy' }}</p>
                                <p><strong>Receipt No:</strong> {{ paymentReciept.receiptNo }}</p>
                                <p><strong>Bill Date:</strong> {{ paymentReciept.billDate | date: 'dd/MM/yyyy' }}</p>
                            </div>

                            <div class="col-md-6">
                                <p><strong>Office: </strong> Water Bill Section</p>
                                <p><strong>Consumer Name: </strong> {{ paymentReciept.consumerName }}</p>
                                <p><strong>Consumer ID:</strong> {{ paymentReciept.consumerId }}</p>
                                <p><strong>Consumer Number:</strong> {{ paymentReciept.consumerNumber }}</p>
                            </div>
                        </div>

                    </div>
                    <div class="receipt-details">
                        <table class="table">
                            <tbody>
                                <tr>
                                    <td>Arrears</td>
                                    <td>₹{{ paymentReciept.arrears }}</td>
                                </tr>
                                <tr>
                                    <td>Fine</td>
                                    <td>₹{{ paymentReciept.fine }}</td>
                                </tr>
                                <tr>
                                    <td>Advance</td>
                                    <td>₹{{ paymentReciept.advance }}</td>
                                </tr>
                                <tr>
                                    <td><strong>Total</strong></td>
                                    <td><strong>₹{{ paymentReciept.total }}</strong></td>
                                </tr>
                                <tr>
                                    <td>Discount</td>
                                    <td>₹{{ paymentReciept.discount }}</td>
                                </tr>
                                <tr>
                                    <td>Incentive</td>
                                    <td>₹{{ paymentReciept.incentive }}</td>
                                </tr>
                                <tr>
                                    <td><strong>Payment Effected</strong></td>
                                    <td><strong>₹{{ paymentReciept.paymentEffected }}</strong></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>



                <div class="modal-footer">
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-dark" (click)="printReceipt()">Print</button>
                </div>
            </div>
        </div>
    </div>

    <!-- New Consumer Modal -->
    <div class="modal fade" id="newConnectionModal" tabindex="-1" aria-labelledby="newConnectionModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="newConnectionModalLabel">{{ connectionModalHeader }}</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <h6 class="Headings mb-4 mt-0">Form Details [ {{todayDate}} ]</h6>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label>Div</label>
                                    <select class="form-select border-focus" [(ngModel)]="newconnection.div" name="div"
                                        required>
                                        <option value="" disabled>Select a Division</option>
                                        <option value="Division 1">Division 1</option>
                                        <option value="Division 2">Division 2</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label>Collection Center</label>
                                    <select class="form-select border-focus"
                                        [(ngModel)]="newconnection.collectionCenter" name="collectionCenter" required>
                                        <option value="" disabled>Select a Collection Center</option>
                                        <option value="Center 1">Center 1</option>
                                        <option value="Center 2">Center 2</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label>Mode</label>
                                    <select class="form-select border-focus" [(ngModel)]="newconnection.mode"
                                        name="mode" required>
                                        <option value="" disabled>Select a Mode</option>
                                        <option value="Online">Online</option>
                                        <option value="Offline">Offline</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label>Source</label>
                                    <select class="form-select border-focus" [(ngModel)]="newconnection.source"
                                        name="source" required>
                                        <option value="" disabled>Select a Source</option>
                                        <option value="Website">Website</option>
                                        <option value="Referral">Referral</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label>Temporary Form No.</label>
                                    <input type="text" class="form-control border-focus"
                                        [(ngModel)]="newconnection.temporaryFormNo" name="temporaryFormNo" required />
                                </div>
                            </div>
                            <div class="col-md-6">

                                <div class="mb-3">
                                    <label>Purchase Date</label>
                                    <input type="date" class="form-control border-focus"
                                        [(ngModel)]="newconnection.purchaseDate" name="purchaseDate" required />
                                </div>

                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label>Permanent Form No.</label>
                                    <input type="text" class="form-control border-focus"
                                        [(ngModel)]="newconnection.permanentFormNo" name="permanentFormNo" required />
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label>Submission Date</label>
                                    <input type="date" class="form-control border-focus"
                                        [(ngModel)]="newconnection.submissionDate" name="submissionDate" required />
                                </div>
                            </div>
                        </div>

                        <h6 class="Headings mb-4 mt-0">Type of Connection</h6>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label>Type of Connection</label>

                                    <select class="form-select border-focus" [(ngModel)]="newconnection.type"
                                        name="type" required>
                                        <option value="" disabled>Select a Connection Type</option>
                                        <option value="Water">Water</option>
                                        <option value="Sewer">Sewer</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6 mb-0">
                                <div class="mb-3">
                                    <label>Applicant is Already Consumer?</label>
                                    <select class="form-select border-focus"
                                        [(ngModel)]="newconnection.isAlreadyConsumer" name="isAlreadyConsumer" required>
                                        <option value="" disabled>Select Option</option>
                                        <option value="Yes">Yes</option>
                                        <option value="No">No</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <h6 class="Headings mb-4">Applicant's Details</h6>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label>First Name</label>
                                    <input type="text" class="form-control border-focus"
                                        [(ngModel)]="newconnection.firstName" name="firstName" required />
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label>Last Name</label>
                                    <input type="text" class="form-control border-focus"
                                        [(ngModel)]="newconnection.lastName" name="lastName" required />
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label>Father's/Husband's Name</label>
                                    <input type="text" class="form-control border-focus"
                                        [(ngModel)]="newconnection.fatherHusbandName" name="fatherHusbandName"
                                        required />
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label>Occupation</label>
                                    <input type="text" class="form-control border-focus"
                                        [(ngModel)]="newconnection.occupation" name="occupation" required />
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label>Present Address</label>
                                    <textarea class="form-control border-focus" name="presentAddress"
                                        id="presentAddress" cols="30" rows="4"
                                        [(ngModel)]="newconnection.presentAddress"></textarea>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label>Phone No</label>
                                    <input type="text" class="form-control border-focus"
                                        [(ngModel)]="newconnection.phoneNumber" name="phoneNo" required />
                                </div>
                                <div class="mb-3">
                                    <label>Mobile No</label>
                                    <input type="text" class="form-control border-focus"
                                        [(ngModel)]="newconnection.mobileNo" name="mobileNo" required />
                                </div>

                            </div>
                        </div>
                        <h6 class="Headings mb-4 mt-0"><span style="opacity: 0;">Form Fees</span></h6>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label>Form Fee</label>
                                    <input type="number" class="form-control border-focus"
                                        [(ngModel)]="newconnection.formFee" name="formFee" required disabled="true" />
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label>Receipt No</label>
                                    <input type="text" class="form-control border-focus"
                                        [(ngModel)]="newconnection.receiptNo" name="receiptNo" required />
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer border-0">
                    <button type="button" class="btn btn-light" data-bs-dismiss="modal"
                        (click)="resetForm()">Cancel</button>
                    <button type="submit" class="btn btn-dark btn-submit" id="btn-submit"
                        (click)="updateConnection()">{{ isConsumerUpdateModalOpen ? 'Update Application' : 'Submit
                        Application' }}</button>
                </div>
            </div>
        </div>
    </div>